<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∞–ª—É</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>


  <section class="container" style="padding: 2rem 1rem;">
    <h2>üéì –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∞–ª—É</h2>
    <p>–ò–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂–¥—ã –∞—è“õ—Ç–∞“ì–∞–Ω —Å–æ“£ –∞—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑–¥—ñ –ª–∞—Ç—ã–Ω ”ô—Ä—ñ–ø—Ç–µ—Ä—ñ–º–µ–Ω –µ–Ω–≥—ñ–∑—ñ–ø, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∂“Ø–∫—Ç–µ–π –∞–ª–∞—Å—ã–∑.</p>

    <input type="text" id="fullName" placeholder="–ú—ã—Å–∞–ª—ã: Aidana Akhmetova" class="input" />
    <button onclick="generateCertificate()" class="btn">üì• –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—Ç—ã –∂“Ø–∫—Ç–µ—É</button>
  </section>

  <script>
    async function generateCertificate() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ orientation: 'landscape' });

      const name = document.getElementById("fullName").value.trim();
      if (!name) {
        alert("–ê—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑–¥—ñ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑.");
        return;
      }

      const date = new Date().toLocaleDateString('en-GB');
      const rand = Math.floor(1000 + Math.random() * 9000);
      const certId = `SD-${new Date().toISOString().slice(0,10).replace(/-/g, '')}-${rand}`;
      const certURL = `https://shobdamy.kz/cert?id=${certId}`;

      // –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–∏–∑–∞–π–Ω—ã
      doc.setFillColor(245, 250, 255);
      doc.rect(10, 10, 270, 170, 'F');
      doc.setDrawColor(51, 153, 204);
      doc.rect(10, 10, 270, 170);

      doc.setFontSize(28);
      doc.setTextColor(51, 102, 153);
      doc.text("CERTIFICATE", 140, 40, null, null, "center");

      doc.setFontSize(14);
      doc.setTextColor(0, 0, 0);
      doc.text(`This certifies that ${name}`, 140, 60, null, null, "center");
      doc.text("has successfully completed the SHOB DAMY Entrepreneurship Instruction.", 140, 75, null, null, "center");
      doc.text(`Date: ${date}`, 140, 95, null, null, "center");
      doc.text(`Certificate ID: ${certId}`, 140, 110, null, null, "center");
      doc.text("www.shobdamy.kz", 140, 125, null, null, "center");

      // QR-–∫–æ–¥
      const qr = qrcode(0, 'L');
      qr.addData(certURL);
      qr.make();
      const qrDataUrl = qr.createDataURL();

      const img = new Image();
      img.src = qrDataUrl;
      img.onload = function () {
        doc.addImage(img, 'PNG', 235, 20, 30, 30);
        doc.save("certificate.pdf");
      };
    }
  </script>
</body>
</html>
